body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 0; }
.topbar { display: flex; justify-content: space-between; padding: 10px 14px; background: #111827; color: #fff; position: fixed; top: 0; left: 0; right: 0; z-index: 2000; }
.topbar.is-scrolled { box-shadow: 0 1px 6px rgba(0,0,0,0.22); }
.topbar a { color: #fff; margin-right: 12px; text-decoration: none; }
.topbar__left { white-space: nowrap; overflow-x: auto; scrollbar-width: none; }
.topbar__left::-webkit-scrollbar { display: none; }
.topbar__right { white-space: nowrap; }
.app-content { padding-top: var(--top-nav-height, 56px); }
.container { padding: 16px; max-width: 1100px; }
table { border-collapse: collapse; width: 100%; margin: 8px 0 18px 0; }
th, td { border: 1px solid #e5e7eb; padding: 6px 8px; text-align: left; }
th { background: #f3f4f6; }
.table-scroll { max-height: 340px; overflow: auto; border: 1px solid #e5e7eb; }
.table-scroll--resizable { height: 340px; width: 80vw; min-width: 320px; max-width: 95vw; min-height: 200px; max-height: 80vh; resize: both; overflow: auto; margin: 0 auto; }
.table-scroll table { margin: 0; border: 0; }
.table-scroll th, .table-scroll td { border-left: 0; border-right: 0; }
.table-scroll th { position: sticky; top: var(--sticky-header-top, 0px); z-index: 1200; background: #f3f4f6; box-shadow: 0 1px 0 rgba(0,0,0,0.06); }
.nowrap { white-space: nowrap; }
.num { text-align: right !important; font-variant-numeric: tabular-nums; font-feature-settings: "tnum"; }
.col-date { width: 120px; }
.grid2 { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.grid3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }
.banner { padding: 10px 14px; }
.banner--warn { background: #fef3c7; color: #92400e; border-bottom: 1px solid #f59e0b; }
.banner--ok { background: #ecfdf5; color: #065f46; border-bottom: 1px solid #10b981; }
.box { padding: 10px; border: 1px solid #e5e7eb; background: #f9fafb; margin: 10px 0; }
.muted { color: #6b7280; font-size: 0.92em; }
.cell-ok { background: #bbf7d0 !important; color: #065f46; }   /* green */
.cell-bad { background: #fecaca !important; color: #7f1d1d; }  /* red */
input, select, textarea, button { font: inherit; }
button { padding: 6px 10px; }

/* --- UI style guide primitives (reusable) --- */
:root{
  --ui-radius: 12px;
  --ui-border: #e5e7eb;
  --ui-bg: #ffffff;
  --ui-muted: #6b7280;
  --ui-shadow: 0 10px 25px rgba(0,0,0,0.08);
  --ui-green: #065f46;
  --ui-red: #7f1d1d;
  --top-nav-height: 44px;
  --sticky-header-top: var(--top-nav-height);
}
.ui-muted { color: var(--ui-muted); font-size: 0.92em; }
.ui-tabular-nums { font-variant-numeric: tabular-nums; font-feature-settings: "tnum"; }
.ui-num { text-align: right !important; }
.ui-section-title { font-weight: 700; margin-bottom: 8px; }

.ui-card { border: 1px solid var(--ui-border); background: var(--ui-bg); border-radius: var(--ui-radius); padding: 12px; }
.ui-card__label { color: var(--ui-muted); }
.ui-card__value { line-height: 1.2; }
.ui-card__subtext { }
.ui-kpi--align-right .ui-card__value { text-align: right; }
.ui-kpi { min-height: 96px; display: flex; flex-direction: column; justify-content: space-between; }
.ui-kpi .ui-card__label { font-size: 12px; margin-bottom: 4px; }
.ui-kpi .ui-card__value { font-size: 22px; font-weight: 600; }
.ui-kpi .ui-card__subtext { font-size: 12px; margin-top: 2px; }

.ui-tone-neutral .ui-card__value { color: inherit; }
.ui-tone-positive .ui-card__value { color: #166534; }
.ui-tone-negative .ui-card__value { color: #991b1b; }
.ui-tone-warning .ui-card__value { color: #92400e; }

.ui-text-positive { color: #166534; }
.ui-text-negative { color: #991b1b; }

.ui-grid-kpi { display: grid; grid-template-columns: repeat(4, minmax(0, 1fr)); gap: 12px; }
.ui-kpi-grid { display: grid; gap: 14px; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); margin: 10px 0 14px 0; }

.ui-badge { display: inline-flex; align-items: center; gap: 6px; padding: 2px 10px; border-radius: 999px; font-size: 0.82rem; border: 1px solid #d1d5db; background: #f3f4f6; color: #374151; }
.ui-badge--neutral { background: #f3f4f6; }
.ui-badge--outline { background: transparent; }
.ui-badge--safe { border-color: #16a34a; color: #166534; }
.ui-badge--risk { border-color: #f59e0b; color: #92400e; }
.ui-badge--bad { border-color: #ef4444; color: #991b1b; background: #fef2f2; }

.ui-disclosure { border: 1px solid var(--ui-border); background: var(--ui-bg); border-radius: var(--ui-radius); padding: 10px 12px; }
.ui-disclosure summary { cursor: pointer; font-weight: 700; list-style: none; }
.ui-disclosure summary::-webkit-details-marker { display: none; }

/* Focus rings (accessibility) */
a:focus-visible, button:focus-visible, summary:focus-visible, input:focus-visible, select:focus-visible, textarea:focus-visible {
  outline: 2px solid #2563eb;
  outline-offset: 2px;
  border-radius: 8px;
}

/* --- Holdings page (tier-1 UX) --- */
.page-title { display: flex; justify-content: space-between; align-items: flex-start; gap: 12px; flex-wrap: wrap; }
.page-title__left { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
.page-title__right { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
.page-title h1 { margin: 0; font-size: 1.55rem; line-height: 1.15; }
.breadcrumb { margin-bottom: 6px; }
.breadcrumb a { text-decoration: none; }
.breadcrumb a:hover { text-decoration: underline; }
.badge, .ui-badge { display: inline-flex; align-items: center; gap: 6px; padding: 2px 10px; border-radius: 999px; font-size: 0.82rem; border: 1px solid #d1d5db; background: #f3f4f6; color: #374151; }
.badge--neutral, .ui-badge--neutral { background: #f3f4f6; }
.badge--outline, .ui-badge--outline { background: transparent; }
.badge--safe, .ui-badge--safe { border-color: #16a34a; color: #166534; }
.badge--risk, .ui-badge--risk { border-color: #f59e0b; color: #92400e; }

.inline-alert { max-width: 520px; border: 1px solid #e5e7eb; background: #fff7ed; border-radius: 10px; padding: 8px 10px; }
.inline-alert summary { cursor: pointer; list-style: none; display: flex; gap: 8px; align-items: center; }
.inline-alert summary::-webkit-details-marker { display: none; }
.inline-alert__icon { font-size: 1rem; }
.inline-alert__link { margin-left: auto; color: #2563eb; font-size: 0.9em; }

.alert { border: 1px solid #e5e7eb; border-radius: 10px; padding: 10px 12px; margin: 10px 0; background: #f9fafb; }
.alert--warn { background: #fef3c7; border-color: #f59e0b; color: #92400e; }
.alert--ok { background: #ecfdf5; border-color: #10b981; color: #065f46; }
.alert summary { cursor: pointer; font-weight: 600; }
.alert summary::-webkit-details-marker { display: none; }

.holdings-summary { margin: 12px 0; }
.selection-line { margin: 6px 0 12px 0; }
.card, .ui-card { border: 1px solid #e5e7eb; background: #fff; border-radius: 12px; padding: 12px; }
.kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
.kpi-label { color: #6b7280; font-size: 0.85rem; }
.kpi-value { font-size: 1.45rem; font-weight: 700; margin-top: 3px; }
.kpi--pos .kpi-value { color: #065f46; }
.kpi--neg .kpi-value { color: #7f1d1d; }

.holdings-grid { display: grid; grid-template-columns: 1fr 340px; gap: 14px; align-items: start; }
.holdings-aside { position: sticky; top: calc(var(--top-nav-height) + 12px); align-self: start; }
.section-title, .ui-section-title { font-weight: 700; margin-bottom: 8px; }
.form-compact { display: grid; gap: 10px; }
.form-compact label { display: grid; gap: 4px; }

.btn { border: 1px solid #d1d5db; background: #fff; border-radius: 10px; padding: 6px 10px; cursor: pointer; }
.btn--primary { background: #111827; border-color: #111827; color: #fff; }
.btn--secondary { background: #f3f4f6; }
.btn--sm { padding: 6px 10px; border-radius: 9px; font-size: 0.92em; }
.btn--link { border: 0; background: transparent; color: #2563eb; padding: 0; font: inherit; text-decoration: underline; cursor: pointer; }
.btn--link:hover { color: #1d4ed8; }

.table-toolbar { display: flex; justify-content: space-between; align-items: center; gap: 10px; flex-wrap: wrap; margin-bottom: 8px; }
.dropdown { position: relative; }
.dropdown summary { cursor: pointer; list-style: none; }
.dropdown summary::-webkit-details-marker { display: none; }
.dropdown__menu { position: absolute; right: 0; top: calc(100% + 6px); background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 10px; min-width: 220px; box-shadow: 0 10px 25px rgba(0,0,0,0.08); z-index: 10; }
.dropdown__menu label { display: flex; gap: 8px; align-items: center; padding: 4px 0; }
.dropdown__item { display: block; padding: 6px 0; color: #111827; text-decoration: none; }
.dropdown__item:hover { text-decoration: underline; }
.dropdown__danger { width: 100%; text-align: left; background: transparent; border: 0; padding: 6px 0; color: #991b1b; cursor: pointer; font: inherit; }
.dropdown__danger:hover { text-decoration: underline; }

.table-wrap { overflow-x: visible; border: 1px solid #e5e7eb; border-radius: 12px; }
.table-wrap table { margin: 0; min-width: 860px; border: 0; }
.table-wrap th, .table-wrap td { border-left: 0; border-right: 0; }
.table-wrap thead th { position: sticky; top: var(--sticky-header-top, 0px); z-index: 1500; background: #f3f4f6; box-shadow: 0 1px 0 rgba(0,0,0,0.06); }
.table-wrap tbody tr:nth-child(even):not(.is-total-row) td { background: #fcfcfd; }
.table-wrap tbody tr:not(.is-total-row):hover td { background: #f9fafb; }
.table-wrap table tr.is-total-row td { background: #f3f4f6; }
.table-wrap table tr.is-total-row td { border-top: 2px solid #d1d5db; }
.table-wrap table tr.is-total-row:hover td { background: #f3f4f6; }

.wash-cell { display: flex; flex-direction: column; gap: 4px; }
.wash-date { font-size: 0.86em; }
.account-cell__inner { max-width: 240px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.symbol-cell { display: flex; flex-direction: column; gap: 2px; }
.symbol-main { font-weight: 600; }
.symbol-sub { font-size: 0.86em; }
.gain-pos { color: #065f46; }
.gain-neg { color: #7f1d1d; }

.sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

.symbol-main-row { display: flex; align-items: center; gap: 8px; min-width: 0; }
.holdings-row-toggle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 2px 6px;
  border-radius: 10px;
  border: 1px solid transparent;
  background: transparent;
  color: #374151;
  cursor: pointer;
}
.holdings-row-toggle:hover { background: #f3f4f6; border-color: #e5e7eb; }
.holdings-row-toggle__icon { font-size: 0.95rem; line-height: 1; }
.holdings-row-toggle__placeholder { display: inline-block; width: 28px; height: 1px; }

.holdings-drilldown-row td { padding: 10px 10px; border-top: 0; }
.table-wrap tbody tr.holdings-drilldown-row:hover td { background: inherit; }
.holdings-drilldown-container { padding: 0; }
.holdings-drilldown-panel { background: #fcfcfd; }
.holdings-drilldown__header { display: flex; justify-content: space-between; align-items: baseline; gap: 10px; margin-bottom: 10px; }
.holdings-drilldown__title { font-weight: 700; }
.holdings-drilldown__section { margin-top: 12px; }
.holdings-drilldown__section-title { font-weight: 700; margin-bottom: 6px; }
.holdings-lots-table-wrap table { min-width: 720px; }

/* Sync → Connections */
.sync-connections-table .col-toggle { width: 38px; }
.sync-connections-table th,
.sync-connections-table td { padding-top: 5px; padding-bottom: 5px; }
.sync-connections-table .col-toggle { padding-left: 6px; padding-right: 6px; }
.conn-cell { display: grid; gap: 2px; min-width: 0; }
.conn-cell__top { display: flex; align-items: center; justify-content: space-between; gap: 10px; min-width: 0; }
.conn-cell__name { color: inherit; text-decoration: none; min-width: 0; }
.conn-cell__name:hover { text-decoration: underline; }
.conn-cell__tag { flex: 0 0 auto; }
.conn-cell__meta { font-size: 0.86em; }
.sync-actions { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
.sync-actions__form { margin: 0; }
.dropdown__item-btn { width: 100%; text-align: left; background: transparent; border: 0; padding: 6px 0; color: #111827; cursor: pointer; font: inherit; }
.dropdown__item-btn:hover { text-decoration: underline; }
.sync-conn-details-row td { padding: 10px 10px; border-top: 0; }
.table-wrap tbody tr.sync-conn-details-row:hover td { background: inherit; }
.sync-conn-details__grid { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; align-items: start; }

/* --- Cash & Bills dashboard --- */
.cashbills-header { position: sticky; top: var(--top-nav-height); z-index: 1200; background: #fff; padding: 6px 0 10px; border-bottom: 1px solid #e5e7eb; }
.cashbills-controls { display: flex; align-items: flex-end; gap: 10px; flex-wrap: wrap; }
.cashbills-control { display: grid; gap: 4px; }
.cashbills-control__label { font-size: 12px; color: var(--ui-muted); }
.cashbills-control__input { border: 1px solid #d1d5db; border-radius: 10px; padding: 6px 10px; background: #fff; min-width: 140px; }
.cashbills-control--date { min-width: 170px; }
.cash-bills-page .container { max-width: 1720px; width: 100%; margin: 0 auto; padding-left: 24px; padding-right: 24px; }
.cash-bills-main { display: grid; grid-template-columns: minmax(0, 2.2fr) minmax(0, 1.2fr); gap: 24px; align-items: start; margin-top: 12px; }
.cash-bills-left, .cash-bills-right { min-width: 0; overflow: hidden; }
.cash-bills-left { display: flex; flex-direction: column; gap: 16px; }
.cash-bills-right { display: flex; flex-direction: column; gap: 16px; }
.cashbills-section-header { display: flex; justify-content: space-between; align-items: flex-start; gap: 12px; flex-wrap: wrap; margin-bottom: 8px; }
.cashbills-filters { display: grid; gap: 8px; justify-items: flex-end; }
.cashbills-filters--top { display: flex; flex-wrap: wrap; gap: 8px 12px; justify-content: flex-start; align-items: center; margin: 8px 0 16px; }
.chip-group { display: flex; gap: 6px; flex-wrap: wrap; }
.ui-chip { border: 1px solid #d1d5db; background: #fff; color: #111827; padding: 4px 10px; border-radius: 999px; font-size: 0.82rem; cursor: pointer; }
.ui-chip.is-active { background: #111827; color: #fff; border-color: #111827; }
.cashbills-table { margin-top: 6px; }
.cashbills-card-name { font-weight: 600; }
.cashbills-finance-meta { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; }
.cashbills-finance-meta .btn--link { padding: 0; font-size: 0.85em; }
.cashbills-coverage { display: grid; gap: 6px; margin-top: 6px; }
.cashbills-coverage__row { display: flex; justify-content: space-between; align-items: center; gap: 10px; }
.cashbills-coverage__net { font-weight: 700; }
.cashbills-coverage__divider { height: 1px; background: #e5e7eb; margin: 6px 0; }
.cash-bills-page .table-wrapper { width: 100%; overflow-x: auto; }
.cash-bills-page .data-table { width: 100%; min-width: 0; table-layout: fixed; }
.data-table th, .data-table td { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.cash-bills-page .bills-table { min-width: 0; }
.cash-bills-page .bills-table th { white-space: nowrap; text-overflow: clip; overflow: visible; }
.bills-table th:nth-child(2),
.bills-table td:nth-child(2) { white-space: normal; }
.bills-table th:nth-child(6),
.bills-table td:nth-child(6) { white-space: normal; }
.bills-table td:nth-child(2) .card-cell {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  word-break: break-word;
}
.bills-table th:nth-child(3),
.bills-table td:nth-child(3),
.bills-table th:nth-child(4),
.bills-table td:nth-child(4),
.bills-table th:nth-child(5),
.bills-table td:nth-child(5) { text-align: right; }
.cash-bills-page .bills-table th.status-col,
.cash-bills-page .bills-table td.status-col { text-align: center; }
.cashbills-cash-table { min-width: 0; }
.cashbills-cash-table th:nth-child(1),
.cashbills-cash-table td:nth-child(1) { white-space: normal; }
.cashbills-cash-table th:nth-child(2),
.cashbills-cash-table td:nth-child(2),
.cashbills-cash-table th:nth-child(3),
.cashbills-cash-table td:nth-child(3) { text-align: right; }
.cashbills-finance-detail-table th,
.cashbills-finance-detail-table td { white-space: nowrap; }
.cashbills-finance-detail-table th:nth-child(2),
.cashbills-finance-detail-table td:nth-child(2) { white-space: normal; }
.cashbills-finance-detail-table th:nth-child(3),
.cashbills-finance-detail-table td:nth-child(3) { text-align: right; }

.cashbills-modal { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background: rgba(15, 23, 42, 0.45); z-index: 2500; }
.cashbills-modal.is-open { display: flex; }
.cashbills-modal__dialog { background: #fff; border-radius: 14px; width: min(980px, 94vw); max-height: 90vh; overflow: auto; padding: 16px 18px; box-shadow: 0 20px 45px rgba(15, 23, 42, 0.2); }
.cashbills-modal__header { display: flex; align-items: center; justify-content: space-between; gap: 12px; }
.cashbills-modal__actions { display: flex; gap: 8px; align-items: center; }
.cashbills-modal__tabs { display: flex; gap: 8px; margin-top: 12px; flex-wrap: wrap; }
.cashbills-modal__filters { display: flex; flex-wrap: wrap; gap: 12px; align-items: center; margin-top: 10px; }
.cashbills-modal__filter { display: grid; gap: 4px; font-size: 12px; color: var(--ui-muted); }
.cashbills-modal__filter select { border: 1px solid #d1d5db; border-radius: 8px; padding: 6px 8px; font-size: 14px; }
.cashbills-modal__body { margin-top: 12px; }
.cashbills-modal__table { margin-top: 8px; }
.cashbills-modal__hint { font-size: 0.92em; color: var(--ui-muted); margin-top: 6px; }
.cashbills-inline-form { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 8px; margin-top: 8px; }
.cashbills-inline-form label { font-size: 12px; color: var(--ui-muted); display: grid; gap: 4px; }
.cashbills-inline-form input,
.cashbills-inline-form select { border: 1px solid #d1d5db; border-radius: 8px; padding: 6px 8px; font-size: 14px; }
.cashbills-inline-actions { display: flex; gap: 8px; margin-top: 8px; }
.cashbills-inline-actions .btn { min-width: 84px; }
.cashbills-bill-status { display: inline-flex; align-items: center; justify-content: center; min-width: 78px; }
.cashbills-modal__row { border-top: 1px solid #e5e7eb; padding: 10px 0; }
.cashbills-modal__row:first-child { border-top: 0; }
.cashbills-modal__grid { display: grid; grid-template-columns: minmax(0, 1.6fr) minmax(0, 1.2fr) minmax(0, 2.2fr) repeat(4, minmax(0, 1fr)) 140px; gap: 10px; align-items: center; }
.cashbills-modal__grid--active { grid-template-columns: minmax(0, 1.6fr) minmax(0, 1.2fr) minmax(0, 2.2fr) repeat(2, minmax(0, 1fr)) 120px 110px 120px; }
.cashbills-modal__grid--recent { grid-template-columns: 120px minmax(0, 1.2fr) minmax(0, 2fr) 120px minmax(0, 1.2fr) 110px; }
.cashbills-modal__grid--card { grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.2fr) minmax(0, 2.2fr) minmax(0, 1.3fr) minmax(0, 1fr) repeat(4, minmax(0, 1fr)) 120px; }
.cashbills-modal__grid--card-active { grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.2fr) minmax(0, 2.2fr) minmax(0, 1.3fr) minmax(0, 1fr) minmax(0, 0.9fr) minmax(0, 1fr) minmax(0, 1.1fr) 110px 120px; }
.cashbills-modal__grid--card-recent { grid-template-columns: 120px minmax(0, 1.2fr) minmax(0, 2fr) 120px minmax(0, 1.2fr) minmax(0, 1fr) 110px; }
.cashbills-modal__cell-title { font-weight: 600; }
.cashbills-modal__cell-muted { font-size: 0.9em; color: var(--ui-muted); }
.cashbills-modal__cell-wrap { white-space: normal; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; word-break: break-word; }
.cashbills-due-meta { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 6px; }
.cashbills-modal__row.is-focus { background: #fffbeb; border-radius: 10px; padding: 10px 8px; }
.cashbills-modal__actions-row { display: flex; gap: 8px; justify-content: flex-end; }
.cashbills-modal__toggle { display: inline-flex; align-items: center; gap: 6px; font-size: 0.9em; }
.cashbills-modal__toggle input { accent-color: #111827; }

.ui-skeleton { position: relative; overflow: hidden; background: #f3f4f6; border-radius: 10px; min-height: 80px; }
.ui-skeleton::after { content: ""; position: absolute; inset: 0; transform: translateX(-100%); background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent); animation: skeleton 1.2s infinite; }
.ui-skeleton--table { min-height: 180px; }
.ui-skeleton--block { min-height: 90px; }
@keyframes skeleton { 100% { transform: translateX(100%); } }

@media (max-width: 1100px) {
  .cash-bills-main { grid-template-columns: 1fr; }
}
.sync-create-section { border: 1px solid var(--ui-border); border-radius: var(--ui-radius); padding: 10px 12px; }
.sync-create-section legend { font-weight: 700; padding: 0 6px; }

/* Sync → Connection detail */
.sync-conn-overview-actions { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px; }
.sync-run-summary__row { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
.sync-snapshots-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; align-items: start; }
.sync-files-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; align-items: start; }

/* Expenses subnav (tabs) */
.ui-tabs { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 10px; }
.ui-tab { display: inline-flex; align-items: center; gap: 8px; padding: 6px 10px; border-radius: 999px; border: 1px solid #e5e7eb; background: #fff; color: #374151; text-decoration: none; }
.ui-tab:hover { background: #f9fafb; }
.ui-tab--active, .ui-tab[aria-current="page"] { background: #111827; border-color: #111827; color: #fff; }
.ui-tab--active .ui-muted, .ui-tab[aria-current="page"] .ui-muted { color: rgba(255,255,255,0.82); }
.ui-tab__count { font-size: 0.92em; }

/* Sell optimizer (drill-down) */
.opt-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; align-items: start; margin-top: 8px; }
.opt-col { display: grid; gap: 10px; align-content: start; }
.opt-rates-line { display: flex; align-items: center; justify-content: space-between; gap: 10px; flex-wrap: wrap; }
.opt-inline-action { padding: 4px 8px; border-radius: 10px; }
.opt-status { margin-left: auto; }
.opt-summary { margin-top: 10px; }
.opt-note { padding: 8px 10px; }
.opt-note__head { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
.opt-note__list { margin: 6px 0 0 18px; }
.opt-advanced { border-top: 1px solid #e5e7eb; padding-top: 8px; margin-top: 8px; }
.opt-advanced summary { cursor: pointer; list-style: none; }
.opt-advanced summary::-webkit-details-marker { display: none; }
.opt-advanced__body { margin-top: 6px; display: grid; gap: 4px; }

.opt-context { background: #f9fafb; border-color: #e5e7eb; }
.opt-context__title { font-weight: 700; margin-bottom: 8px; }
.opt-context__rows { display: grid; gap: 6px; }
.opt-context__hint { margin-top: 8px; }
.opt-kv { display: flex; align-items: baseline; justify-content: space-between; gap: 10px; }
.opt-kv__k { font-size: 0.92em; }
.opt-kv__v { font-weight: 600; }
.opt-context__value--warn { color: #92400e; }

.holdings-lots-table tbody tr.lot-row.is-selected td { background: #eff6ff; }
.holdings-lots-table tbody tr.lot-row.is-selected td { border-top-color: #bfdbfe; border-bottom-color: #bfdbfe; }
.holdings-lots-table tbody tr.lot-row.is-selected:hover td { background: #e0f2fe; }
.holdings-lots-table tbody tr.lot-row.is-partial td { background: #f5f3ff; }
.holdings-lots-table tbody tr.lot-row.is-partial:hover td { background: #ede9fe; }
.holdings-lots-table tbody tr.lot-row.is-hover-linked td { box-shadow: inset 0 0 0 1px #60a5fa; }
.holdings-lots-table tbody tr.lot-row.is-hover-linked.is-partial td { box-shadow: inset 0 0 0 1px #a78bfa; }
.holdings-lots-table tbody tr.lot-row.is-pulse td { animation: lotPulse 280ms ease-out; }
.holdings-lots-table tbody tr.lot-row:focus-visible td { box-shadow: inset 0 0 0 2px #2563eb; }

.holdings-optimizer__plan tbody tr.plan-row.is-hover-linked td { background: #f1f5f9; box-shadow: inset 0 0 0 1px #94a3b8; }

/* Reports */
.report-tile { display: block; text-decoration: none; color: inherit; }
.report-tile:hover { box-shadow: 0 1px 0 rgba(0,0,0,0.06); }
.report-tile__title { font-weight: 700; margin-top: 2px; }
.report-filters-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 10px; align-items: end; }
.report-filters-actions { display: flex; flex-direction: column; justify-content: flex-end; }

.perf-chart { width: 100%; height: 260px; display: block; }
.perf-chart-wrap { width: 100%; overflow: hidden; position: relative; }
.perf-chart-tooltip {
  position: absolute;
  z-index: 5;
  max-width: 320px;
  background: #fff;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  padding: 8px 10px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.10);
  pointer-events: none;
  font-size: 12px;
  color: #111827;
}
.perf-chart-tooltip__date { font-weight: 700; margin-bottom: 6px; }
.perf-chart-tooltip__row { display: flex; justify-content: space-between; gap: 10px; margin: 2px 0; }
.perf-chart-tooltip__k { color: #6b7280; }
.perf-chart-tooltip__v { font-variant-numeric: tabular-nums; }
.perf-chart-legend { font-variant-numeric: tabular-nums; }
.perf-chart-controls { display: flex; justify-content: space-between; gap: 10px; flex-wrap: wrap; align-items: center; }
.perf-chart-controls__right { display: flex; gap: 6px; align-items: center; flex-wrap: wrap; }
.perf-mode-btn[aria-pressed="true"] { border-color: #111827; background: #111827; color: #fff; }
.perf-mode-btn[aria-pressed="false"] { }
.perf-chart-inspector__row { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
.perf-chart-inspector__row input[type="range"] { flex: 1 1 240px; }
.perf-chart-inspector__help { margin-top: 6px; }
.holdings-optimizer__plan tbody tr.plan-row:focus-visible td { box-shadow: inset 0 0 0 2px #2563eb; }

.lot-selection-legend { margin: 6px 0 10px 0; }
.lot-selection-legend__title { font-weight: 700; margin-bottom: 4px; }
.lot-selection-legend__items { display: flex; gap: 14px; flex-wrap: wrap; align-items: center; }
.lot-selection-legend__item { display: inline-flex; gap: 8px; align-items: center; }
.lot-selected-cell { min-width: 140px; }
.lot-selected-pill { border-color: #60a5fa; color: #1d4ed8; }
.lot-selected-pill--partial { border-color: #a78bfa; color: #5b21b6; }
.lot-selected-sub { font-size: 0.86em; margin-top: 2px; }

@keyframes lotPulse {
  0% { filter: brightness(1); }
  50% { filter: brightness(0.97); }
  100% { filter: brightness(1); }
}
@media (prefers-reduced-motion: reduce) {
  .holdings-lots-table tbody tr.lot-row.is-pulse td { animation: none; }
}

.holdings-optimizer__fieldset { border: 1px solid #e5e7eb; border-radius: 12px; padding: 8px 10px; margin: 0; }
.holdings-optimizer__fieldset legend { font-weight: 700; padding: 0 6px; }
.holdings-optimizer__radio, .holdings-optimizer__check { display: flex; align-items: center; gap: 8px; padding: 2px 0; }
.holdings-optimizer__actions { display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap; }
.holdings-optimizer__helpers { display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap; }
.holdings-optimizer__summary-grid { display: grid; grid-template-columns: repeat(4, minmax(0, 1fr)); gap: 10px; }
.holdings-optimizer__plan-wrap table { min-width: 820px; }

.accordion { border: 1px solid #e5e7eb; background: #fff; border-radius: 12px; padding: 10px 12px; margin: 12px 0; }
.accordion summary { cursor: pointer; font-weight: 700; list-style: none; }
.accordion summary::-webkit-details-marker { display: none; }
.details-panel, .ui-disclosure { border: 1px solid #e5e7eb; background: #fff; border-radius: 12px; padding: 10px 12px; margin-top: 10px; }
.details-panel summary { cursor: pointer; font-weight: 700; list-style: none; }
.details-panel summary::-webkit-details-marker { display: none; }
.kv { border-collapse: collapse; width: 100%; margin: 8px 0 0 0; }
.kv td { border: 0; border-top: 1px solid #e5e7eb; padding: 8px 6px; }
.kv tr:first-child td { border-top: 0; }

.holdings-table[data-col-account="0"] .col-account { display: none; }
.holdings-table[data-col-price="0"] .col-price { display: none; }
.holdings-table[data-col-initial-cost="0"] .col-initial-cost { display: none; }
.holdings-table[data-col-tax="0"] .col-tax { display: none; }
.holdings-table[data-col-entered="0"] .col-entered { display: none; }
.holdings-table[data-col-wash="0"] .col-wash { display: none; }

@media (max-width: 980px) {
  .container { max-width: 100%; }
  .holdings-grid { grid-template-columns: 1fr; }
  .holdings-aside { position: static; }
  .kpi-grid, .ui-grid-kpi, .ui-kpi-grid { grid-template-columns: 1fr 1fr; }
  .opt-grid { grid-template-columns: 1fr; }
  .holdings-optimizer__summary-grid { grid-template-columns: 1fr 1fr; }
  .sync-conn-details__grid { grid-template-columns: 1fr; }
  .sync-snapshots-grid { grid-template-columns: 1fr; }
  .sync-files-grid { grid-template-columns: 1fr; }
  .sync-actions { flex-wrap: wrap; }
}

@media (min-width: 1180px) {
  .opt-grid { grid-template-columns: 1fr 1fr 320px; }
  .opt-context { align-self: start; }
}
@media (max-width: 540px) {
  .kpi-grid, .ui-grid-kpi, .ui-kpi-grid { grid-template-columns: 1fr; }
  .table-wrap table { min-width: 760px; }
  .account-cell__inner { max-width: 180px; }
  .holdings-optimizer__summary-grid { grid-template-columns: 1fr; }
}

/* Enable horizontal scroll only when needed; keeps sticky headers working reliably across browsers. */
@media (max-width: 980px) {
  .table-wrap { overflow-x: auto; }
}
